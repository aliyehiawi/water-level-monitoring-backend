server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: ${SERVER_CONTEXT_PATH:/api}

spring:
  # Database Configuration - Development
  datasource:
    url: ${DB_URL:jdbc:h2:mem:testdb}
    driver-class-name: org.h2.Driver
    username: ${DB_USERNAME:sa}
    password: ${DB_PASSWORD:}
    hikari:
      # Development pool settings (smaller than production)
      # Shared settings (connection-timeout, idle-timeout, max-lifetime) are in application.yml
      maximum-pool-size: ${DB_POOL_MAX_SIZE:10}
      minimum-idle: ${DB_POOL_MIN_IDLE:2}

  h2:
    console:
      enabled: ${H2_CONSOLE_ENABLED:true}
      path: ${H2_CONSOLE_PATH:/h2-console}

  jpa:
    hibernate:
      ddl-auto: ${HIBERNATE_DDL_AUTO:create-drop}
    show-sql: ${JPA_SHOW_SQL:true}
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
        format_sql: ${HIBERNATE_FORMAT_SQL:true}

  # Security Configuration - Development
  # NOTE: Dev-only default secret provided for convenience
  # This secret is safe to commit as it's only for local development
  # Production requires a strong JWT_SECRET via environment variable
  security:
    jwt:
      secret: ${JWT_SECRET:d9186e580e5478f4c37fab2faca76464}
      expiration: ${JWT_EXPIRATION:86400000} # 24 hours in milliseconds

  # WebSocket Configuration - Development
  websocket:
    allowed-origins: ${WEBSOCKET_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:4200}

  # MQTT Configuration - Development
  # Development defaults use local Mosquitto broker
  mqtt:
    broker:
      url: ${MQTT_BROKER_URL:tcp://localhost:1883}
    client:
      id: ${MQTT_CLIENT_ID:water-level-backend-dev}
    username: ${MQTT_USERNAME:}
    password: ${MQTT_PASSWORD:}
    # MQTT connection settings (shared config in application.yml)
    # Only environment-specific values here

# CORS Configuration - Development
# Other CORS settings (methods, headers, etc.) are in application.yml
cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:4200}

# Logging Configuration - Development
logging:
  level:
    root: ${LOG_LEVEL_ROOT:INFO}
    com.example.waterlevel: ${LOG_LEVEL_APP:DEBUG}
    org.springframework.security: ${LOG_LEVEL_SECURITY:DEBUG}
    org.hibernate.SQL: ${LOG_LEVEL_SQL:DEBUG}
    org.hibernate.type.descriptor.sql.BasicBinder: ${LOG_LEVEL_SQL_BINDER:TRACE}

# Swagger/OpenAPI Configuration - Development
# Swagger UI is freely accessible in development
springdoc:
  server-url: ${SPRINGDOC_SERVER_URL:http://localhost:8080}
  swagger-ui:
    enabled: true
  contact:
    name: ${SPRINGDOC_CONTACT_NAME:Water Level Monitoring Team}
    email: ${SPRINGDOC_CONTACT_EMAIL:}

