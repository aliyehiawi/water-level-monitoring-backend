#!/bin/sh

# Pre-commit hook script
# This script runs before each commit to ensure code quality

echo "Running pre-commit checks..."

# Apply code formatting
echo "Applying code formatting..."
./gradlew spotlessApply
if [ $? -ne 0 ]; then
    echo "âŒ Code formatting failed!"
    exit 1
fi

echo "âœ… Code formatting applied successfully"

# Run tests
echo "Running tests..."
./gradlew test
if [ $? -ne 0 ]; then
    echo "âŒ Tests failed!"
    exit 1
fi

echo "âœ… All tests passed"

# Run static analysis
echo "Running static analysis..."
./gradlew checkstyleMain
if [ $? -ne 0 ]; then
    echo "âŒ Checkstyle violations found!"
    exit 1
fi

echo "âœ… Static analysis passed"

echo "ğŸ‰ All pre-commit checks passed!"
exit 0
